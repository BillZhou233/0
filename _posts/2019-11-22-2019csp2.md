---
layout: post
title: 2019 CSP-S 二试自闭记
subtitle: ~让我们一起来赞美毒瘤 CCF 吧~
date: 2019-11-22
tags: ['OI', 'CSP', '游记']
categories: main
---

![](https://pic2.zhimg.com/80/v2-530db69115dcd576aa1fa17d86e19c18_hd.jpg)

全民制作人们大家好，我是练习时长两年半的个人 OIer BillZhou233。这次有幸成为了进入首届 CSP-S 认证二试的选手，在这篇文章中会将这次参赛的经历分享出来。

### Day -1 - 开赛前的恐慌

中午去机房登录官网下载准考证，看到校 OI 群里面一则公告，说今年 CSP-S2 的机试将会采用 NOI Linux 作为比赛环境并配官方公告为证。Linux 系统笔者只用过 Win10 的 WSL 版 Ubuntu 18.04 (还只能用纯终端界面操作的那种...)，编辑器也只知道是个 Linux 都会有的上古装x神器 Vim，运行也只会直接手打命令进行编译。对桌面环境和 NOI Linux 的细节一无所知。其他没接触过 Linux 的大佬更慌...

面对这样的恐慌，教练表示不要害怕，看能否申请换成 Windows，实在不行就临时开课讲 Linux。晚上就收到通知去上 Linux 课，教输密码、开文件夹、复制粘贴以及对付可怕的 ~~BU~~GUIDE... ~~(上届已高考大佬：GUIDE 就是个垃圾)~~ 还介绍了类似 Windows 下 Notepad3 的文本编辑器 gedit。接着笔者凭借自己 WSL 里面的经验讲了终端基本命令、手动编译还有 Vim 的使用。讲完之后队内一起交流 gedit 的使用和配置。笔者作为半个 Vim 党，决定使用 Vim 作为主要编辑器，gedit 用于辅助。课后背了几个 Vim 的常用配置命令，然后演练了两种编辑器和手动编译。

### Day 0 - 有惊无险的启程

中午拿到笔电，带到机房简单测试了一下，发现原系统 Win7 输入法坏了，就刷成了 Win10，打上驱动包，下载了 Chrome，再从内网拷了 DevC++ 和 GVIM，顺便装上网易云，一个便携代码环境就做好了 (想象一下 8 年前的笔电跑暴力 DFS 的感觉...)。下午回机房取包出校，搭公交前往高铁站的路上用手机码了个 Dijkstra 求最短路... 没码完就下车了。在车站等了下还没到的另一批人，连同同市的其他 OIers 一起进站乘车。

候车室里取出笔电开启 GVIM，准备把 Dijkstra 码完，本来以为用硬核的上古神器已经足够装x了，然而还有比这更装x的存在。旁边 [@欣逸](https://www.luogu.org/user/126760) 巨佬没带笔电，用自带的无线键盘 + 手机 TeamViewer 软件远程连接到机房的电脑上的 VSCode 写代码。这一幕被其他巨佬拍了下来，传到洛谷群里面，甚至引来了 [@kkksc03](https://www.luogu.org/user/1)... 这便是未来的移动编程再进化！检票上车之后在高铁上码了一下并查集和 Kruskal 求最小生成树 (其实是同一份代码)，写完后差不多就收起电脑下车了，然后就坐地铁到达宾馆。(别问我为什么不在地铁上码代码，问就一个字挤)

到宾馆收拾好东西，放好电脑之后看了一会就去吃了个饭。然后又去隔壁房间玩，打了几把中国传统的关于排列组合、概率论和博弈论的区块链学术游戏之后回房看了 Cppreference 的 STL 用法、一些数据结构和图论，再复习了一下 Vim 命令，就 12 点了...

### Day 1 - 不开 unsigned 见祖宗

6 点起来第一件事先开洛谷打卡，转发动态乞求 rp++，然后再复习了一下板子和 Vim 命令，接着就坐公交去 NC 大学了。在计算机实验室旁边的食堂里面吃了个早饭，买了瓶 AC 钙，然后去拿准考证，听教练说 NC 大学机房的电脑都是 Win7，用 VMWare 虚拟姬而非双系统来运行 NOI Linux 系统，就怕 Windows 系统里面没有 DevC++...

接下来就进到考场 408 机房，开机，的确用的是 Win7 + VMWare 10 虚拟姬的方案，Windows 系统里面真的没有 DevC++，不过有 Chrome 和 Excel (打表好评)。熟练地启动虚拟姬之后依照密码条登录到交卷系统，然而整个考场里面姓名一栏显示地都是错误的名字...后来特派员解释说姓名是缓存的，一切以准考证号为准，说着就反手把姓名栏删了。接下来系统准备开始下发考卷，考试即将开始。

前面 5 分钟先把已经背了两天的 `~/.vimrc` 配置文件写好，不过上古神器不方便用鼠标选择，不方便复制粘贴是硬伤，所以也调了一下用来辅助的 gedit。

接下来拆包看题目，看到了格雷码和两棵树... Vim 走起~ T1 硬是看了十几分钟才弄懂格雷码是个啥玩意，在纸上推了个迭代算法，大致思路如下: 最开始用于记录上回商数的 `pre = 0`，由第 `n` 位向第 `1` 位倒序迭代，先算 `now = k / (2 ^ (n-1) )`，然后输出 `now xor pre` 的值，再把 `now` 值赋值给 `pre` 并计算 `k = k % (2 ^ (n-1) )`，最后更新 `n` 值开启下一轮迭代。实现的时候因为没有看到负数就习惯性直接无脑上了 `typedef unsigned long long ll`，然后在测试大数字的时候还是遇到了问题。为了排除精度带来的影响，用 Python 重新实现了算法，用大数字证明了算法的正确性，确定是精度的问题。接下来再回到 C++ 代码里面，确认开启 `ull` 后对比发现 C++ 代码计算 `2 ^ (n-1)` 用的是左移运算符，个人猜测就是这里出的锅，然后就把左移换成了 `while` 循环。编译之后手动测了几组大数字并且和 Python 版对拍随机数字结果完全一致，应该是 AC 了。

然后开始砍树...先是 T2 括号树，看完题意后发现前面的一些点是链的情况，就码了一个链上枚举，枚举所有字串用栈原理判定括号匹配，码完之后没有链上样例就口糊了几个数据。然后去看 T3 发现一脸制杖，就放弃治疗关掉 Vim 换 gedit 开始复制粘贴输出样例。然后回到 T2，本来想优化再改一下基于链上的暴力算法变成树的版本，改到一半发现只有 10 min，要 TLE 了，又太复杂，就没改了，直接先交了个优化版，然后再检查了三份代码的正确性和条件编译就下考了。

说到交题，考试时交卷系统里面说是以 `taskx.cpp` 作为文件名提交，`x` 为题号。考试途中有人再问了提交文件名和 `freopen` 里指派的 I/O 文件名如何填写的问题，特派员的回复如下:

> 我们提供人性化服务，提交程序的文件名直接按着网页上的指示填题号，我们会自动改成试卷上正确的名字，就不会出现填错找不到文件名的情况了。程序输入输出的文件就按试卷上的来填，评测的时候才找得到文件。

好麻烦啊... 都按着卷子上的名字来填不好吗?

考试结束后去食堂吃饭，交流了一下考试的结果。有人 T1 没开 `ull` 见了祖宗的，有正解写到一半暴力写炸的，也有像笔者一样不会就干脆输出样例的。还好我开了 `ull` (幸灾乐祸)，不过 T2 暴力炸了没就真说不定了...

接着回宾馆看了一下图论 (我就不信图论不考结果 Day 2 还真没考)，打了一下午 Malody，然后晚上去吃了个 KFC，买了点烧烤，去隔壁房间边吃边看视频，看了各种各样的"影 流 之 主"之后回房继续，然后又翻了 Cppreference 的 STL 用法，看了一遍算法，又 12 点了...

### Day 2 - 模拟退役

6 点起来再打卡宜 CSP，再放送后打的直达 NC 大学考场，吃完早饭后又买了一瓶 AC 钙，祈求不要考树，然后就进考场了。进考场之后就听到特派员的广播:

> 各位选手请不要打电话给我抱怨题目难了，题目不是我们出的，试卷也不是我们改的，都是由北京 CCF 总部统一处理的，你们要有点基本的专业素养，我们只负责把你们的程序交给北京。

广播结束后启动虚拟姬，娴熟地调试好 `~/.vimrc` 和 gedit 之后拆包开题。

T1 《卫宫家今天的饭》貌似是某番番名?!反正没看过，直接看题。理解题意之后打了个 DFS 枚举，对每种方法，先假设不用该方法往下搜，再对该方法枚举可用的食材，判定是否符合条件，是则加上方案数再往下搜，否则直接往下搜。写完之后过了一下样例，前面三个过了，后面喜闻乐见 TLE，就先去看 T2。然后发现 T2 居然还要玩高精?!怕了怕了，为了证明 CSP 和 NOIP 没有关系，这次竟出了高精的题... 惊了的笔者就打开了 gedit 开始复制样例。接下来是 T3，又是一棵树，这次是重心。笔者看到又出树，很慌，想不起重心的求法实现了，就又开了 gedit 复制样例，之后自闭的滚回去调 T1，搞一顿玄学优化，还剩下十几分钟，检查了三份代码的正确性和条件编译就下考了。

出考场后一起去食堂吃饭，交流了一下结果，顺便吐槽了一波广播，并预测了分数线划定，就坐车去高铁站了。上高铁后凭借记忆在笔电上码了 D1T1 和 D2T1 的代码 (关于 D1T2，我忘了)，回家之后在洛谷交了一发，D1T1 AC，D2T1 32pts，然而 D1T2 也不知炸没炸，预估就在 120 ~ 150 左右吧，混个 3= 或者 2= 还是可以的，不过那都是后话了... 明年 CSP-S 2020 继续!

### Day +2 - 还没完与 CCF 的贺电

中午去机房，看到群里面大佬都在讨论什么东西... 点开一看: JX CSP-S2 全部重考?! 然后教练接到 CCF 的贺电，也来说明了一下，预计时间在 11/23/2019，下午考。"影 流 之 主"歌词竟一语成真?! 然后去洛谷讨论区看了一下，机房几位大佬已经发了帖，把 JX 的 OIers 全部炸出来了。然后就在帖子里面看到了同省的 [@谬悠](https://www.luogu.org/user/234271) 巨佬和笔者一样都在 408 考场，就约定到时候见一见面，还互换了友链。

### Day +3 - 这也是 OIer 应该做的~

中午登洛谷看到讨论区里求问 Vim 用法，作为半个 Vim 党就直接把自用的考场用 `~/.vimrc` 模板贴出来了，后来 [@谬悠](https://www.luogu.org/user/234271) 巨佬似乎是看到了这篇回复，也知道考场上巨佬们第一次面对可爱 Vim 的第一感受了。其实互帮互助本来就是 OI 的传统，这也是身为一个 OIer 应该做的事。

### Final Day

```cpp
// Waiting...
```

### 代码

D1T1 格雷码 AC

```cpp
#include <cstdio>
using namespace std;

typedef unsigned long long ll;

ll n,k,n2,k2,tmp,flag,pre;

inline ll pw2(ll num) {ll ans = 1; while (num--) ans *= 2; return ans;}

int main()
{
	scanf("%llu%llu",&n,&k);
	n2 = n;
	k2 = k;
	while (n2)
	{
		tmp = pw2(n2-1);
		flag = (k2 >= tmp)? 1: 0;
		k2 = (k2 >= tmp)? (k2-tmp): k2;
		if (flag == pre) putchar('0');
		else putchar('1');
		--n2;
		pre = flag;
	}
	putchar('\n');
	return 0;
}
```

D2T1 卫宫家今天的饭 32pts

```cpp
#include <cstdio>
using namespace std;

typedef unsigned long long ll;

static const ll qwq = 998244353;

ll m,n,cnt[2005],a[105][2005],kkk,ans;

inline ll max2() {ll ans2 = 0, m2 = m; do ans2 = (cnt[m2] > ans2)? cnt[m2]: ans2; while (--m2); return ans2;}

void dfs(ll nid, ll pre)
{
	if (nid > n) return;
	dfs(nid+1,pre);
	for (register ll i = 1; i <= m; ++i)
	{
		if(a[nid][i])
		{
			++kkk; ++cnt[i];
			ll now = (pre * a[nid][i]) % qwq;
			if ((kkk > 1) && (max2() <= (kkk / 2))) ans = (ans + now) % qwq;
			dfs(nid+1,now);
			--kkk; --cnt[i];
		}
	}
}

int main()
{
	scanf("%llu%llu",&n,&m);
	for (register ll i = 1; i <= n; ++i) for (register ll j = 1; j <= m; ++j) scanf("%llu",&a[i][j]);
	dfs(1,1);
	printf("%llu",ans);
	return 0;
}
```

### 致谢  (排名不分先后，想到什么写什么)

- 一直支持我 OI 生涯的教练、大佬们
- [@谬悠](https://www.luogu.org/user/234271) 巨佬
- 我的笔电和机房的电脑
- Vim 作者和 gedit 作者 (两款都是考场上优秀的编辑器)
- Microsoft Corp.  (VSCode 大法好，笔者编辑这篇 Markdown 的编辑器之一)
- KDE  (Kate 编辑器，也是编辑这篇 Markdown 的编辑器)
- [路过图床](https://imgchr.com/)

### 花絮

[Link](https://kg3.qq.com/node/play?s=SUgMDzSE_B3JyStk)
